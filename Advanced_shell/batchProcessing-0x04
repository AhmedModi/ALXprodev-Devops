#!/bin/bash

fetch_pokemon() {
    name=$1
    curl -s https://pokeapi.co/api/v2/pokemon/$name -o "$name.json" &
    pid=$!

    # Timeout after 5 seconds
    ( sleep 5 && kill -9 "$pid" >/dev/null 2>&1 ) &
    watchdog=$!

    wait "$pid" 2>/dev/null
    kill "$watchdog" 2>/dev/null
}

for pokemon in Bulbasaur Ivysaur Venusaur Charmander Charmeleon; do
    fetch_pokemon "$pokemon" &
done

wait
echo "All fetch processes completed."
